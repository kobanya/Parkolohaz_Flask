<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Parkolóház</title>
    <style>
        /* CSS stílusok itt */
    </style>
</head>
<body>
    <h2>Parkolóhelyek</h2>
    <div id="parkolohelyek">
        <!-- Parkolóhelyek megjelenítése itt -->
    </div>

    <h2>A jármű rendszáma</h2>
    <div>
        <input type="text" id="rendszam" placeholder="Rendszám" />
        <button id="belepes_gomb">KÜLDÉS</button>
    </div>

    <!-- Módosítás: Megjelenítjük a parkolóhely számot behajtáskor -->
    <h2>Parkolóhely száma: <span id="parkolohely_szam"></span></h2>

    <h2><span id="fizetendo_dij"></span> </h2>
    <!-- Díj megjelenítése itt -->

    <script>
        // JavaScript kód itt
        document.getElementById('belepes_gomb').addEventListener('click', function() {
            // AJAX hívás a Flask szerverhez a QR kód elküldésével
            var rendszam = document.getElementById('rendszam').value;
            var xhr = new XMLHttpRequest();
            xhr.open('POST', '/ellenorzes', true);
            xhr.setRequestHeader('Content-Type', 'application/json;charset=UTF-8');
            xhr.onreadystatechange = function() {
                if (xhr.readyState === XMLHttpRequest.DONE) {
                    if (xhr.status === 200) {
                        // Sikeres válasz
                        var response = JSON.parse(xhr.responseText);
                        if (response.status === "Behajtás") {
                            // Módosítás: Megjelenítjük a parkolóhely számot behajtáskor
                            document.getElementById('parkolohely_szam').textContent = response.parkolohely_szam;
                            // Módosítás: Megjelenítjük a fizetendő díjat behajtáskor
                            document.getElementById('fizetendo_dij').textContent = '';
                        } else {
                            // Módosítás: Megjelenítjük a fizetendő díjat kihajtáskor
                            document.getElementById('fizetendo_dij').textContent = 'Fizetendő díj: ' + response.dij + ' Ft';
                        }
                    } else {
                        // Hiba történt
                        alert('Hiba történt: ' + xhr.status);
                    }
                }
            };
            xhr.send(JSON.stringify({ rendszam: rendszam }));
        });
    </script>
</body>
</html>
